# render.yaml
services:
  - type: web
    name: web
    env: node
    buildCommand: "npm install"
    startCommand: "npm run start"
    dockerfilePath: ./Dockerfile.web
    envVars:
      - key: NODE_ENV
        value: development
    envFile: .env
    ports:
      - 3000

  - type: pserv
    name: db
    dockerfilePath: ./Dockerfile.db
    envVars:
      - key: POSTGRES_USER
        fromFile: .env
      - key: POSTGRES_PASSWORD
        fromFile: .env
      - key: POSTGRES_DB
        fromFile: .env
    volumes:
      - path: /var/lib/postgresql/data
        name: full_demo
      - key: NODE_ENV
        value: test
    envFile: .env

